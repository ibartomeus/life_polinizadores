---
title: "\\Large Effects of short-term restoration on plant-pollinator communities
  in Cantavieja and Ejea de los Caballeros"
output:
  word_document: default
  latex_engine: xelatex
  pdf_document: default
bibliography: ../references.bib
linkcolor: Black
urlcolor: Black
fontfamily: mathpazo
fontsize: 12pt
header-includes:
- \usepackage{caption}
- \captionsetup[figure]{labelformat=empty}
- \usepackage{float}
- \floatplacement{figure}{H}
- \usepackage[skip=3pt]{caption}
- \captionsetup[figure]{labelformat=empty}
- \usepackage{setspace}
- \usepackage{titling}
- "\\setlength{\\droptitle}{-2.5cm}"
- \usepackage[style=apa]{biblatex}
- \usepackage[labelformat = empty]{caption}
- \usepackage{pdflscape}
---

\vspace{-1.2cm}
\textcolor{gray}{\textit{January 2025}}
\begin{center}
\small
\textbf{Data collection:} O. Aguado | \textbf{Analysis:} J. B. Lanuza and I. Bartomeus | \textbf{Coordination:} E. Nuñez \\
\end{center}

# Index

\begin{itemize}
    \item \hyperlink{objectives}{Objectives}
    \item \hyperlink{sampling-method}{Sampling method}
    \item \hyperlink{comparative-analysis}{Comparative analysis}
      \begin{itemize}
          \item \hyperlink{species-richness-and-interactions}{Species richness and interactions}
          \item \hyperlink{network-structure}{Network structure}
      \end{itemize}
    \item \hyperlink{concluding-remarks}{Conclusions}
\end{itemize}

```{r setup, echo=FALSE, warning=FALSE}
# set global chunk options: 
library(knitr)
opts_chunk$set(cache=FALSE, autodep = TRUE)
#dep_auto()

```

## Objectives

The objective of this report is to describe the differences between two plant-pollinator communities located in Cantavieja and Ejea de los Caballeros before and after restoration practices. In this report, we compare the two plant-pollinator communities using: 1) rarefaction analysis of the number of species and unique interactions; and 2) computation and evaluation of general aspects of network structure. 

All data manipulation and analyses were conducted in R version 4.1.2 [@R]. 

## Sampling method

Two distinct locations were monitored with different historical land-use and management in the region of Aragón (Spain): Cantavieja (40º 30' 44", N 0º 22' 59" W) at 1450m above sea level with a total of 30 plots and Ejea de los Caballeros (42º 01' 06" N, 1º 08' 53" W) at 350m. In each location, a total of 21 plots were monitored in 2021 and 2024. Plot size is 2m by 2m and they are randomly distributed within each location (see **Figure 1**). Importantly, since the start of the project vegetation has remained undisturbed without grazing or clearing. 

Each plot was surveyed three times: at the begining of the season, at the peak of flowering and at the end of the season. In each occasion, all plant-pollinator interactions observed were documented. Pollinator specimens not identified in the field were captured and identified in the lab.


```{r echo=FALSE, out.width='80%',fig.align='center',fig.cap="\\textbf{Figure 1.} Cantavieja (left) and Ejea de los Caballeros (right) locations, with the different sampling plots indicated by an orange square along with the plot identifier. The positions of the bee hives are shown with a white cross in both locations."}

knitr::include_graphics('../Images/Sampling_sites.png')
```

## Comparative analysis

### \textcolor{gray}{Species Richness and Interactions}

In this section, we focus on understanding how species richness and interactions change over time in both locations. Specifically, this section contains:

- (i) Rarefied accumulation curves of pollinator species and unique interactions per location and year to compare the number of observed species and interactions at equal number of sampling rounds (**Figures 2 and 3, respectively**).

- (ii) Comparison of plant and pollinator degree distributions per location and year (**Figure 4**).

- (iii) Comparison of plant and pollinator richness over time per location and year (**Figure 5**).


First, we observe that the rarefied accumulation curve of pollinators shows a non-saturating pattern, indicating that further sampling is needed to fully document the pollinator community of Cantavieja and Ejea de los Caballeros. The number of pollinators was higher in 2024 for both locations, but the difference was especially marked for Ejea de los Caballeros.


```{r echo=F, fig.align='center', message=FALSE, warning=FALSE, out.width="85%", fig.width=10, fig.cap="\\textbf{Figure 2.} Rarefied species accumulation curves across sampling rounds in Cantavieja and Ejea de los Caballeros. The solid line indicates the rarefied number of species per sampling round, the dot represents the observed number of species, and the dashed line shows the extrapolated number of species if additional rounds were conducted."}

library(ggplot2)
library(dplyr)
library(stringr)

p1 = readRDS("../Data/cantavieja_sampling_curve.rds")
p2 = readRDS("../Data/ejea_sampling_curve.rds")

p1 = p1 + theme(plot.title = element_text(size=18, face= "bold"), panel.border = element_rect(size=1.3),
                axis.title = element_text(size=14),
                axis.text = element_text(size=12))
p2 = p2 + theme(plot.title = element_text(size=18, face= "bold"), panel.border = element_rect(size=1.3),
  axis.title = element_text(size=14),
                axis.text = element_text(size=12))

library(patchwork)
p1 + p2

```


Second, the rarefied accumulation curve of unique interactions was calculated for each location and year. Note that _Apis mellifera_ was excluded, as their individuals do not directly respond to the applied restoration practices. An example of unique interaction is the visit of _Amegilla quadrifasciata_ on _Eryngium campestre_, which was observed in both locations. Here, we observed similar patterns to the ones observed for the accumulation curve of pollinator species, where Cantavieja shows little differences between years but Ejea de los Caballeros shows notably more unique interactions for the year 2024.


```{r echo=F, fig.align='center', message=FALSE, warning=FALSE, out.width="85%", fig.width=10, fig.cap="\\textbf{Figure 3.} Comparison of the rarefied number of unique interactions across years in Cantavieja and Ejea de los Caballeros. Note that \\textit{Apis mellifera} were excluded from this analysis."}

library(cowplot)
library(ggplot2)

p1 = readRDS("../Data/cantavieja_interaction_curves.rds")
p2 = readRDS("../Data/ejea_interaction_curves.rds")

p1 = p1 + theme(plot.title = element_text(size=18, face= "bold"), panel.border = element_rect(size=1.3),
                axis.title = element_text(size=14),
                axis.text = element_text(size=12))
p2 = p2 + theme(plot.title = element_text(size=18, face= "bold"), panel.border = element_rect(size=1.3),
  axis.title = element_text(size=14),
                axis.text = element_text(size=12))

library(patchwork)
p1+ p2


```


Third, we compared the degree distributions between the pollinator and plant communities of Cantavieja and Ejea de los Caballeros across different years. Pollinators exhibited a classical decaying distribution for ecological networks [@jordano2003], while plants had a more gradual decaying distribution. Pollinators did not show statistical differences between their distributions between years for both locations (Kruskal-Wallis _P_ > 0.05). However, plants had statistically different distributions for both locations (Kruskal-Wallis _P_ < 0.05). For plants, 2024 show a more even distribution of their interactions across plant species, indicating that the number of plants attracting many different pollinators has increased.



```{r echo=F, fig.align='center', message=FALSE, warning=FALSE, out.width="85%", fig.width=10,fig.height=8, fig.cap="\\textbf{Figure 4.} Comparison of the pollinator and plant degree distributions for Cantavieja and Ejea de los Caballeros between years."}

#Read data
data_2021 = read.csv("../Data/life_polinizadores_2021.csv")
data_2024 = read.csv("../Data/life_polinizadores_2024.csv")
#Combine data
all_data = bind_rows(data_2021, data_2024)
#Rename ejea caballeros to only ejea
all_data = all_data %>%
mutate(site_id = if_else(site_id == "ejea caballeros",
                "ejea", site_id))

#Delete leading and trailing spaces in spp names
all_data = all_data %>%
mutate(pollinators = trimws(pollinators)) %>%
mutate(plants = trimws(plants))

#Create a site_id label with year
#and select only cols of interest
main_cols = all_data %>%
mutate(locality = site_id) %>%
mutate(date = paste(day,month,year,transect, sep = "_")) %>%
mutate(site_id = paste0(site_id, "_" ,year)) %>%
mutate(site_id = str_replace_all(site_id, " ", "_")) %>%
select(locality, site_id, year, transect,  plants, pollinators) %>%
filter(!str_detect(pollinators, " sp")) %>%
filter(!str_detect(plants, " sp")) %>%
mutate(locality = if_else(locality== "cantavieja", "Cantavieja", "Ejea"))

#Calculate degree distributions for pollinators-----
degree_dist = main_cols %>%
group_by(site_id, locality, year, pollinators) %>%
summarise(degree = n_distinct(plants))

#Plot degree distributions
p1 = degree_dist %>%
  ggplot(aes(degree, fill = factor(year),colour = factor(year), group = year, alpha= factor(year))) +
  geom_histogram(bins = 50, binwidth = 0.8, position = "identity") +
  geom_density(aes(y = after_stat(count) * 0.6,colour = factor(year), group = year), alpha = .3) +
  facet_wrap(~locality) +
  theme_bw() +
  labs(title = "Pollinators degree distribution",
       x = "Degree",
       y = "Frequency") +
  scale_fill_manual(name = "Year",values = c("2021" = "black", "2024" = "tomato4")) +
  scale_color_manual(name = "Year",values = c("2021" = "black", "2024" = "tomato4")) +
  scale_alpha_manual(name = "Year",values = c("2021" = 0.8, "2024" = 0.2)) + 
  theme(
  plot.title = element_text(size=18, face= "bold"), 
  axis.text = element_text(size=12),
  panel.border = element_rect(size=1.3), 
  strip.text = element_text(size=14, face = "bold"),
  strip.background = element_blank()
  )+
coord_cartesian(expand = FALSE)

#Calculate degree distributions for plants-----
degree_dist = main_cols %>%
group_by(site_id, locality, year, plants) %>%
summarise(degree = n_distinct(pollinators))

#Plot degree distributions
p2 = degree_dist %>%
  ggplot(aes(degree, fill = factor(year),colour = factor(year), group = year, alpha= factor(year))) +
  geom_histogram(bins = 50, binwidth = 0.8, position = "identity") +
  geom_density(aes(y = after_stat(count) * 1.5,colour = factor(year), group = year), alpha = .3) +
  facet_wrap(~locality) +
  theme_bw() +
  labs(title = "Plant degree distribution",
       x = "Degree",
       y = "Frequency") +
  scale_fill_manual(name = "Year",values = c("2021" = "black", "2024" = "tomato4")) +
  scale_color_manual(name = "Year",values = c("2021" = "black", "2024" = "tomato4")) +
  scale_alpha_manual(name = "Year",values = c("2021" = 0.8, "2024" = 0.2))  + theme(
  plot.title = element_text(size=18, face= "bold"), 
  axis.text = element_text(size=12),
  panel.border = element_rect(size=1.3), 
  strip.text = element_text(size=14, face = "bold"),
  strip.background = element_blank())+
coord_cartesian(expand = FALSE)


library(patchwork)

p1/p2

```

Fourth, we evaluated how plant and pollinator richness changed over time. The number of observed pollinators, compared to plants, was higher on almost all sampling dates for both years. Ejea de los Caballeros showed notably higher pollinator richness across sampling dates in 2024 compared to the previous year while Cantavieja showed a similar pattern. Additionally, it is worth noting that the number of sampling days and the dates of sampling differed between the years.

```{r echo=F, fig.align='center', message=FALSE, warning=FALSE, out.width="85%", fig.width=10,fig.height=8, fig.cap="\\textbf{Figure 5.} Comparison of the observed richness of plant and pollinator species per sampling date in Cantavieja and Ejea de los Caballeros for the years 2021 and 2024."}

#Read data from 2021 and 2024
#First,load libraries
library(dplyr)
library(reshape2)
library(stringr)
library(ggplot2)
#Read data
data_2021 = read.csv("../Data/life_polinizadores_2021.csv")
data_2024 = read.csv("../Data/life_polinizadores_2024.csv")
#Combine data
all_data = bind_rows(data_2021, data_2024)
#Rename ejea caballeros to only ejea
all_data = all_data %>%
mutate(site_id = if_else(site_id == "ejea caballeros",
                "ejea", site_id))

#Delete leading and trailing spaces in spp names
all_data = all_data %>%
mutate(pollinators = trimws(pollinators)) %>%
mutate(plants = trimws(plants))

#Create a plot of pollinators and plants per date
main_cols = all_data %>%
select(c(site_id,
         day,
         month,
         year,
         plants,
         pollinators)) %>%
mutate(date = as.Date(paste(year, month, day, sep = "-"),
  format = "%Y-%m-%d"))

#Count plant and pollinator species by date and site
spp_date = main_cols %>%
group_by(date, site_id, year) %>%
summarise(Plants = n_distinct(plants),
          Pollinators = n_distinct(pollinators))

#Subset data by location
library(tidyr)
spp_date_ejea_2021 = spp_date %>%
filter(site_id == "ejea" & year == "2021") %>%
  pivot_longer(cols = c(Pollinators, Plants),
               names_to = "Species",
               values_to = "count")

spp_date_ejea_2024 = spp_date %>%
filter(site_id == "ejea" & year == "2024") %>%
  pivot_longer(cols = c(Pollinators, Plants),
               names_to = "Species",
               values_to = "count")

#Plot data by location
library(scales)
p1 = spp_date_ejea_2021 %>%
ggplot(aes(date, count, fill = Species)) +
geom_col(position = "dodge",width=6) +
scale_fill_manual(values = c("azure4", "coral4")) +
coord_cartesian(expand = FALSE) +
ylab("Species") +
ylim(0,55) +
theme_bw() +
xlab(NULL) +
ggtitle("b) Ejea de los caballeros") +
theme(plot.title = element_text(hjust = 0.5, face = "bold")) +
scale_x_date(
    limits = as.Date(c("2021-03-10", "2021-07-30")),
    breaks = as.Date(c("2021-03-20","2021-04-20", "2021-05-20",
                       "2021-06-20", "2021-07-20")),
    labels = format(as.Date(c("2021-03-20","2021-04-20", "2021-05-20",
                       "2021-06-20", "2021-07-20")),  "%d %b %Y"))

#Plot data by location
p2 = spp_date_ejea_2024 %>%
ggplot(aes(date, count, fill = Species)) +
geom_col(position = "dodge",width=6) +
scale_fill_manual(values = c("azure4", "coral4")) +
coord_cartesian(expand = FALSE) +
ylab("Species") +
ylim(0,55) +
xlab("Date") +
theme_bw()+
scale_x_date(
    limits = as.Date(c("2024-03-10", "2024-07-30")),
    breaks = as.Date(c("2024-03-20","2024-04-20", "2024-05-20",
                       "2024-06-20", "2024-07-20")),
    labels = format(as.Date(c("2024-03-20","2024-04-20", "2024-05-20",
                       "2024-06-20", "2024-07-20")),  "%d %b %Y"))

#Repeat process for cantavieja
spp_date_canta_2021 = spp_date %>%
filter(site_id == "cantavieja" & year == "2021") %>%
  pivot_longer(cols = c(Pollinators, Plants),
               names_to = "Species",
               values_to = "count")

spp_date_canta_2024 = spp_date %>%
filter(site_id == "cantavieja" & year == "2024") %>%
  pivot_longer(cols = c(Pollinators, Plants),
               names_to = "Species",
               values_to = "count")

#Plot data by location
library(scales)

p3 = spp_date_canta_2021 %>%
ggplot(aes(date, count, fill = Species)) +
geom_col(position = "dodge",width=6) +
scale_fill_manual(values = c("azure4", "coral4")) +
coord_cartesian(expand = FALSE) +
ylab("Species") +
ylim(0,55) +
theme_bw() +
xlab(NULL) +
ggtitle("a) Cantavieja") +
theme(plot.title = element_text(hjust = 0.5, face = "bold")) +
scale_x_date(
    limits = as.Date(c("2021-05-10", "2021-08-30")),
    breaks = as.Date(c("2021-05-20",
                       "2021-06-20", "2021-07-20", "2021-08-20")),
    labels = format(as.Date(c("2021-05-20",
                       "2021-06-20", "2021-07-20",
                       "2021-08-20")),  "%d %b %Y"))
#Plot data by location
p4 = spp_date_canta_2024 %>%
ggplot(aes(date, count, fill = Species)) +
geom_col(position = "dodge",width=6) +
scale_fill_manual(values = c("azure4", "coral4")) +
coord_cartesian(expand = FALSE) +
ylab("Species") +
ylim(0,55) +
xlab("Date") +
theme_bw()+
scale_x_date(
    limits = as.Date(c("2024-05-10", "2024-08-30")),
    breaks = as.Date(c("2024-05-20",
                       "2024-06-20", "2024-07-20", "2024-08-20")),
    labels = format(as.Date(c("2024-05-20",
                       "2024-06-20", "2024-07-20",
                       "2024-08-20")),  "%d %b %Y"))

((p3 / p4) | (p1/p2)) + plot_layout(guides = "collect") &
theme(legend.position = "bottom", 
      plot.title = element_text(size=18, face= "bold"), 
      panel.border = element_rect(size=1.3),
      axis.title = element_text(size=14),
       axis.text = element_text(size=10),
      legend.text = element_text(size=14),
      legend.title = element_text(size=16))



```


### \textcolor{gray}{Network structure}

```{r echo=F, fig.align='center', message=FALSE, warning=FALSE}


#Load r data
#Read data from 2021 and 2024
#First,load libraries
library(dplyr)
library(reshape2)
library(stringr)
library(ggplot2)
#Read data
data_2021 = read.csv("../Data/life_polinizadores_2021.csv")
data_2024 = read.csv("../Data/life_polinizadores_2024.csv")
#Combine data
all_data = bind_rows(data_2021, data_2024)
#Rename ejea caballeros to only ejea
all_data = all_data %>%
mutate(site_id = if_else(site_id == "ejea caballeros",
                "ejea", site_id))

#Delete leading and trailing spaces in spp names
all_data = all_data %>%
mutate(pollinators = trimws(pollinators)) %>%
mutate(plants = trimws(plants))

#Create a site_id label with year
#and select only cols of interest
main_cols = all_data %>%
mutate(locality = site_id) %>%
mutate(date = paste(day,month,year,transect, sep = "_")) %>%
mutate(site_id = paste0(site_id, "_" ,year)) %>%
mutate(site_id = str_replace_all(site_id, " ", "_")) %>%
select(locality, site_id, year, date, transect,  plants, pollinators)

#Get number of species of plants and pollinators
#per location and year (site_id has already year on it)
n_spp_poll = main_cols %>%
group_by(locality, year) %>%
#filter(!str_detect(pollinators, " sp"))  %>% 
summarise(n_pollinators = n_distinct(pollinators))
n_spp_plant = main_cols %>%
group_by(locality, year) %>%
#filter(!str_detect(plants, " sp"))  %>% 
summarise(n_plants= n_distinct(plants))
#Bind both datasets
n_spp = left_join(n_spp_poll, n_spp_plant)

#Prepare data to laod markdown
can_2021 = n_spp %>% 
filter(locality == "cantavieja" & year == "2021")
can_2024 = n_spp %>% 
filter(locality == "cantavieja" & year == "2024")
eje_2021 = n_spp %>% 
filter(locality == "ejea" & year == "2021")
eje_2024 = n_spp %>% 
filter(locality == "ejea" & year == "2024")

#Get total number of interactions recorded per study
interactions = main_cols %>% 
group_by(locality, year) %>% 
summarise(Interactions = n())
#Prepare data of interactions to laod markdown
can_2021_int = interactions %>% 
filter(locality == "cantavieja" & year == "2021")
can_2024_int = interactions %>% 
filter(locality == "cantavieja" & year == "2024")
eje_2021_int = interactions %>% 
filter(locality == "ejea" & year == "2021")
eje_2024_int = interactions %>% 
filter(locality == "ejea" & year == "2024")

matrices_list = readRDS("../Data/matrices_list.rds")

#Calculate network descriptors
library(bipartite)
library(purrr)
library(tidyr)
#Compute specialization
H2_results = map(matrices_list, H2fun, H2_integer=TRUE)
network_h2 = bind_rows(H2_results, .id = "Site_id")
network_h2 = network_h2 %>%
select(Site_id, H2)
#Compute connectance
connectance_results = map(matrices_list, networklevel, index="connectance")
network_connectance = bind_rows(connectance_results, .id = "Site_id")
#Bind metric data
metrics = left_join(network_h2,network_connectance)
#Separate Site_id again for plotting
for_plotting = metrics %>%
separate(Site_id, c("site", "Year"), "_") %>%
mutate(site = str_to_title(site)) %>%
rename(Connectance = connectance)

#Prepare data to load markdown
can_net_2021 = for_plotting %>%
filter(site == "Cantavieja" & Year == "2021")
can_net_2024 = for_plotting %>%
filter(site == "Cantavieja" & Year == "2024")
eje_net_2021 = for_plotting %>%
filter(site == "Ejea" & Year == "2021")
eje_net_2024 = for_plotting %>%
filter(site == "Ejea" & Year == "2024")

#Prepare robustness data to load on markdown
long_plants = readRDS("../Data/robustness_plants.rds")
long_pollinators = readRDS("../Data/robustness_pollinators.rds")
long_network = readRDS("../Data/robustness_network.rds")
#Plants
can_2021_rob_plant = long_plants %>% 
filter(site == "cantavieja" & Year == "2021")
can_2024_rob_plant = long_plants %>% 
filter(site == "cantavieja" & Year == "2024")
eje_2021_rob_plant = long_plants %>% 
filter(site == "ejea" & Year == "2021")
eje_2024_rob_plant = long_plants %>% 
filter(site == "ejea" & Year == "2024")
#Pollinators
can_2021_rob_poll = long_pollinators %>% 
filter(site == "cantavieja" & Year == "2021")
can_2024_rob_poll = long_pollinators %>% 
filter(site == "cantavieja" & Year == "2024")
eje_2021_rob_poll = long_pollinators %>% 
filter(site == "ejea" & Year == "2021")
eje_2024_rob_poll = long_pollinators %>% 
filter(site == "ejea" & Year == "2024")
#Network-level
can_2021_rob_net = long_network %>% 
filter(site == "cantavieja" & Year == "2021")
can_2024_rob_net = long_network %>% 
filter(site == "cantavieja" & Year == "2024")
eje_2021_rob_net = long_network %>% 
filter(site == "ejea" & Year == "2021")
eje_2024_rob_net = long_network %>% 
filter(site == "ejea" & Year == "2024")

#Prepare nestedness to load data on markdown
nestedness_tibble = readRDS("../Data/nestedness.rds")

can_2021_nest = nestedness_tibble %>% 
filter(site == "cantavieja" & Year == "2021")
can_2024_nest = nestedness_tibble %>% 
filter(site == "cantavieja" & Year == "2024")
eje_2021_nest = nestedness_tibble %>% 
filter(site == "ejea" & Year == "2021")
eje_2024_nest = nestedness_tibble %>% 
filter(site == "ejea" & Year == "2024")


```

The structure of plant-pollinator networks per location and year was compared using the following network descriptors:

- (i) Network-level specialization (H2'), which indicates how selective the species are at the network level.

- (ii) Connectance, which refers to the number of links compared to all possible links.

- (iii) Robustness, which evaluates how resilient the network is to species loss.

- (iv) Nestedness, which describes how well the interactions of specialist species are subsets of those of generalist species.

Network-level specialization, connectance, and robustness were calculated using the _bipartite_ package [@dormann2008]. Note that for robustness, we evaluated the impact of excluding plant species, pollinator species, and excluding both. To compare nestedness across networks, we used a normalized metric (NODFc) that is independent of network size [@song2017]. This was implemented using the _Maxnodf_ package [@hoeppke2021].


**Cantavieja**

Cantavieja had `r can_2021$n_pollinators` pollinators and `r can_2021$n_plants` plant species in 2021 and `r can_2024$n_pollinators` pollinators and `r can_2024$n_plants` plants in 2024. Note that these numbers include some individuals identified only to the genus level; however, they likely reflect distinct species, as there are generally no records of these genera (4 pollinators and 9 plants in 2021 and 5 pollinators and plants in 2025). The total number of recorded interactions was `r can_2021_int$Interactions` in 2021 and `r can_2024_int$Interactions` in 2024 (**Figure S6** for network comparisons). The level of network specialization was slightly higher in 2021 (H2' = `r round(can_net_2021$H2,2)` than in 2024 (H2' = `r round(can_net_2024$H2,2)`), while connectance was notably higher in 2024 (C = `r round(can_net_2024$Connectance,2)`) than in 2021 (C = `r round(can_net_2021$Connectance,2)`). Robustness to plant loss was `r round(can_2021_rob_plant$Robustness,2)` in 2021 and `r round(can_2024_rob_plant$Robustness,2)` in 2024, robustness to pollinator loss was `r round(can_2021_rob_poll$Robustness,2)` in 2021 and `r round(can_2024_rob_poll$Robustness,2)` in 2024, and robustness at the network level was `r round(can_2021_rob_net$Robustness,2)` in 2021 and `r round(can_2024_rob_net$Robustness,2)` in 2024. Nomalized nestedness showed the opposite trend to network robustness, with `r round(can_2021_nest$temperature,2)` in 2021 and `r round(can_2024_nest$temperature,2)` in 2024. **Figure S8** and **Table 1** provide a summary of these findings.


```{r echo=F, fig.align='center', message=FALSE, warning=FALSE, out.width="90%", fig.width=20,fig.height=20, fig.cap="\\textbf{Figure 6.} Bipartite plant-pollinator networks from Cantavieja. The top graph shows the network for the year 2021, while the bottom graph depicts the network for 2024, highlighting changes in species interactions and species composition between years."}


library(ggraph)
library(dplyr)

#Sample data setup to demonstrate the functionality
#Load data
matrices_list = readRDS("../Data/matrices_list.rds")
canta_matrix_2021 <- matrices_list[[1]]
canta_matrix_2021 <- t(canta_matrix_2021)

# Calculate row and column degrees
row_degrees <- rowSums(canta_matrix_2021 > 0)
col_degrees <- colSums(canta_matrix_2021 > 0)

# Order rows and columns
ordered_rows <- order(row_degrees, decreasing = TRUE)
ordered_columns <- order(col_degrees, decreasing = TRUE)

# Reorder matrix based on degrees
ordered_canta_matrix <- canta_matrix_2021[ordered_rows, ordered_columns]
rownames(ordered_canta_matrix) <- rownames(canta_matrix_2021)[ordered_rows]
colnames(ordered_canta_matrix) <- colnames(canta_matrix_2021)[ordered_columns]

# Create weights tibble
weights <- tibble(
  weight = c(col_degrees[ordered_columns], row_degrees[ordered_rows]),
  name = c(colnames(ordered_canta_matrix), rownames(ordered_canta_matrix)),
  trophic = c(rep("2", length(col_degrees[ordered_columns])), rep("1", length(row_degrees[ordered_rows]))) # Trophic levels
)

# Create layout for the bipartite graph
layout <- create_layout(ordered_canta_matrix, "bipartite") %>%
  mutate(position = ifelse(y > 0, "upper", "lower"))

layout <- left_join(layout, weights, by = "name")

layout_false = layout %>%
filter(type=="FALSE")
layout_true = layout %>%
filter(type=="TRUE")

x_ordered_false = arrange(layout_false,x)
x_ordered_true = arrange(layout_true, x)
n_polls=layout_false %>% nrow(.) 
n_plants=layout_true %>% nrow(.)
max_counts = max(c(n_polls, n_plants))

result_sequence_polls <- seq(from = 1, to = max_counts+200, length.out = n_polls)
result_sequence_plants <- seq(from = 1, to = max_counts+200, length.out = n_plants)

layout_false$x = result_sequence_polls
layout_true$x = result_sequence_plants
#layout_false$x = x_ordered_false$x
#layout_true$x = x_ordered_true$x

layout = bind_rows(layout_false, layout_true)

# Construct the ggraph
p1 = ggraph(layout) +
  geom_edge_link0(aes(edge_width = weight), edge_colour = "grey66") +
  geom_node_point(aes(shape = trophic, colour = trophic, size = weight)) +  # Use 'weight' for size
  geom_node_text(aes(label = name,
                     hjust = ifelse(position == "upper", 0, 1)),
                 size = 6, angle = 90, vjust = 0.5, colour = "black") +
  scale_colour_manual(values = c("darkorange3", "seagreen")) +
  scale_shape_manual(values = c(19, 19)) +
  scale_size_continuous(range = c(5, 15)) +
  scale_edge_width(range = c(0.5, 4.5)) +
  theme(
    panel.grid = element_blank(),
    panel.background = element_blank(),
    panel.border = element_blank(),
    plot.background = element_blank(),
    legend.position = "none",
    plot.margin = margin(t = 200, r = 10, b = 200, l = 10),
    plot.title = element_text(vjust=40, face = "bold", size=22)
  ) +
  coord_cartesian(expand = FALSE, clip = "off") +
  ggtitle("Cantavieja 2021") 

#Cantavieja 2024
canta_matrix_2024 = matrices_list[[2]]

canta_matrix_2024 <- t(canta_matrix_2024)

# Calculate row and column degrees
row_degrees <- rowSums(canta_matrix_2024 > 0)
col_degrees <- colSums(canta_matrix_2024 > 0)

# Order rows and columns
ordered_rows <- order(row_degrees, decreasing = TRUE)
ordered_columns <- order(col_degrees, decreasing = TRUE)

# Reorder matrix based on degrees
ordered_canta_matrix <- canta_matrix_2024[ordered_rows, ordered_columns]
rownames(ordered_canta_matrix) <- rownames(canta_matrix_2024)[ordered_rows]
colnames(ordered_canta_matrix) <- colnames(canta_matrix_2024)[ordered_columns]

# Create weights tibble
weights <- tibble(
  weight = c(col_degrees[ordered_columns], row_degrees[ordered_rows]),
  name = c(colnames(ordered_canta_matrix), rownames(ordered_canta_matrix)),
  trophic = c(rep("2", length(col_degrees[ordered_columns])), rep("1", length(row_degrees[ordered_rows]))) # Trophic levels
)

# Create layout for the bipartite graph
layout <- create_layout(ordered_canta_matrix, "bipartite") %>%
  mutate(position = ifelse(y > 0, "upper", "lower"))

layout <- left_join(layout, weights, by = "name")

layout_false = layout %>%
filter(type=="FALSE")
layout_true = layout %>%
filter(type=="TRUE")

x_ordered_false = arrange(layout_false,x)
x_ordered_true = arrange(layout_true, x)
n_polls=layout_false %>% nrow(.) 
n_plants=layout_true %>% nrow(.)
max_counts = max(c(n_polls, n_plants))

result_sequence_polls <- seq(from = 1, to = max_counts+200, length.out = n_polls)
result_sequence_plants <- seq(from = 1, to = max_counts+200, length.out = n_plants)

layout_false$x = result_sequence_polls
layout_true$x = result_sequence_plants
#layout_false$x = x_ordered_false$x
#layout_true$x = x_ordered_true$x

layout = bind_rows(layout_false, layout_true)

# Construct the ggraph
p2 = ggraph(layout) +
  geom_edge_link0(aes(edge_width = weight), edge_colour = "grey66") +
  geom_node_point(aes(shape = trophic, colour = trophic, size = weight)) +  # Use 'weight' for size
  geom_node_text(aes(label = name,
                     hjust = ifelse(position == "upper", 0, 1)),
                 size = 6, angle = 90, vjust = 0.5, colour = "black") +
  scale_colour_manual(values = c("darkorange3", "seagreen")) +
  scale_shape_manual(values = c(19, 19)) +
  scale_size_continuous(range = c(5, 15)) +
  scale_edge_width(range = c(0.5, 4.5)) +
  theme(
    panel.grid = element_blank(),
    panel.background = element_blank(),
    panel.border = element_blank(),
    plot.background = element_blank(),
    legend.position = "none",
    plot.margin = margin(t = 200, r = 10, b = 200, l = 10),
    plot.title = element_text(vjust=40, face="bold", size = 22)
  ) +
  coord_cartesian(expand = FALSE, clip = "off") +
  ggtitle("Cantavieja 2024") 

library(patchwork)

p1 / p2


```


**Ejea de los Caballeros**

Ejea de los Caballeros had `r eje_2021$n_pollinators` pollinators and `r eje_2021$n_plants` plant species in 2021 and `r eje_2024$n_pollinators` pollinators and `r eje_2024$n_plants` plants in 2024. Note that these numbers include some individuals identified only to the genus level; however, they likely reflect distinct species, as there are generally no records of these genera (7 pollinators and 6 plants 2021 and 12 pollinators and 5 plants in 2025). The total number of recorded interactions was `r eje_2021_int$Interactions` in 2021 and `r eje_2024_int$Interactions` in 2024 (**Figure S7** for network comparisons).  The level of network specialization was slightly higher in 2021 (H2' = `r round(eje_net_2021$H2,2)` than in 2024 (H2' = `r round(eje_net_2024$H2,2)`), while connectance was also slightly higher in 2024 (C = `r round(eje_net_2024$Connectance,2)`) than in 2021 (C = `r round(eje_net_2021$Connectance,2)`). Robustness to plant loss was `r round(eje_2021_rob_plant$Robustness,2)` in 2021 and `r round(eje_2024_rob_plant$Robustness,2)` in 2024, robustness to pollinator loss was `r round(eje_2021_rob_poll$Robustness,2)` in 2021 and `r round(eje_2024_rob_poll$Robustness,2)` in 2024, and robustness at the network level was `r round(eje_2021_rob_net$Robustness,2)`  in 2021 and `r round(eje_2024_rob_net$Robustness,2)`  in 2024. Nomalized nestedness showed the opposite trend to network robustness, with `r round(eje_2021_nest$temperature,2)` in 2021 and `r round(eje_2024_nest$temperature,2)` in 2024. **Figure S8** and **Table 1** provide a summary of these findings.


```{r echo=F, fig.align='center', message=FALSE, warning=FALSE, out.width="90%", fig.width=22,fig.height=20, fig.cap="\\textbf{Figure 7.} Bipartite plant-pollinator networks from Ejea de los Caballeros. The top graph shows the network for the year 2021, while the bottom graph depicts the network for 2024, highlighting changes in species interactions and species composition between years."}


library(ggraph)
library(dplyr)

#Sample data setup to demonstrate the functionality
#Load data
matrices_list = readRDS("../Data/matrices_list.rds")
canta_matrix_2021 <- matrices_list[[3]]
canta_matrix_2021 <- t(canta_matrix_2021)

# Calculate row and column degrees
row_degrees <- rowSums(canta_matrix_2021 > 0)
col_degrees <- colSums(canta_matrix_2021 > 0)

# Order rows and columns
ordered_rows <- order(row_degrees, decreasing = TRUE)
ordered_columns <- order(col_degrees, decreasing = TRUE)

# Reorder matrix based on degrees
ordered_canta_matrix <- canta_matrix_2021[ordered_rows, ordered_columns]
rownames(ordered_canta_matrix) <- rownames(canta_matrix_2021)[ordered_rows]
colnames(ordered_canta_matrix) <- colnames(canta_matrix_2021)[ordered_columns]

# Create weights tibble
weights <- tibble(
  weight = c(col_degrees[ordered_columns], row_degrees[ordered_rows]),
  name = c(colnames(ordered_canta_matrix), rownames(ordered_canta_matrix)),
  trophic = c(rep("2", length(col_degrees[ordered_columns])), rep("1", length(row_degrees[ordered_rows]))) # Trophic levels
)

# Create layout for the bipartite graph
layout <- create_layout(ordered_canta_matrix, "bipartite") %>%
  mutate(position = ifelse(y > 0, "upper", "lower"))

layout <- left_join(layout, weights, by = "name")

layout_false = layout %>%
filter(type=="FALSE")
layout_true = layout %>%
filter(type=="TRUE")

x_ordered_false = arrange(layout_false,x)
x_ordered_true = arrange(layout_true, x)
n_polls=layout_false %>% nrow(.) 
n_plants=layout_true %>% nrow(.)
max_counts = max(c(n_polls, n_plants))

result_sequence_polls <- seq(from = 1, to = max_counts+200, length.out = n_polls)
result_sequence_plants <- seq(from = 1, to = max_counts+200, length.out = n_plants)

layout_false$x = result_sequence_polls
layout_true$x = result_sequence_plants
#layout_false$x = x_ordered_false$x
#layout_true$x = x_ordered_true$x

layout = bind_rows(layout_false, layout_true)

# Construct the ggraph
p1 = ggraph(layout) +
  geom_edge_link0(aes(edge_width = weight), edge_colour = "grey66") +
  geom_node_point(aes(shape = trophic, colour = trophic, size = weight)) +  # Use 'weight' for size
  geom_node_text(aes(label = name,
                     hjust = ifelse(position == "upper", 0, 1)),
                 size = 6, angle = 90, vjust = 0.5, colour = "black") +
  scale_colour_manual(values = c("darkorange3", "seagreen")) +
  scale_shape_manual(values = c(19, 19)) +
  scale_size_continuous(range = c(5, 15)) +
  scale_edge_width(range = c(0.5, 4.5)) +
  theme(
    panel.grid = element_blank(),
    panel.background = element_blank(),
    panel.border = element_blank(),
    plot.background = element_blank(),
    legend.position = "none",
    plot.margin = margin(t = 200, r = 10, b = 200, l = 10),
    plot.title = element_text(vjust=40, face = "bold", size=22)
  ) +
  coord_cartesian(expand = FALSE, clip = "off") +
  ggtitle("Ejea 2021") 

#Cantavieja 2024
canta_matrix_2024 = matrices_list[[4]]

canta_matrix_2024 <- t(canta_matrix_2024)

# Calculate row and column degrees
row_degrees <- rowSums(canta_matrix_2024 > 0)
col_degrees <- colSums(canta_matrix_2024 > 0)

# Order rows and columns
ordered_rows <- order(row_degrees, decreasing = TRUE)
ordered_columns <- order(col_degrees, decreasing = TRUE)

# Reorder matrix based on degrees
ordered_canta_matrix <- canta_matrix_2024[ordered_rows, ordered_columns]
rownames(ordered_canta_matrix) <- rownames(canta_matrix_2024)[ordered_rows]
colnames(ordered_canta_matrix) <- colnames(canta_matrix_2024)[ordered_columns]

# Create weights tibble
weights <- tibble(
  weight = c(col_degrees[ordered_columns], row_degrees[ordered_rows]),
  name = c(colnames(ordered_canta_matrix), rownames(ordered_canta_matrix)),
  trophic = c(rep("2", length(col_degrees[ordered_columns])), rep("1", length(row_degrees[ordered_rows]))) # Trophic levels
)

# Create layout for the bipartite graph
layout <- create_layout(ordered_canta_matrix, "bipartite") %>%
  mutate(position = ifelse(y > 0, "upper", "lower"))

layout <- left_join(layout, weights, by = "name")

layout_false = layout %>%
filter(type=="FALSE")
layout_true = layout %>%
filter(type=="TRUE")

x_ordered_false = arrange(layout_false,x)
x_ordered_true = arrange(layout_true, x)
n_polls=layout_false %>% nrow(.) 
n_plants=layout_true %>% nrow(.)
max_counts = max(c(n_polls, n_plants))

result_sequence_polls <- seq(from = 1, to = max_counts+200, length.out = n_polls)
result_sequence_plants <- seq(from = 1, to = max_counts+200, length.out = n_plants)

layout_false$x = result_sequence_polls
layout_true$x = result_sequence_plants
#layout_false$x = x_ordered_false$x
#layout_true$x = x_ordered_true$x

layout = bind_rows(layout_false, layout_true)

# Construct the ggraph
p2 = ggraph(layout) +
  geom_edge_link0(aes(edge_width = weight), edge_colour = "grey66") +
  geom_node_point(aes(shape = trophic, colour = trophic, size = weight)) +  # Use 'weight' for size
  geom_node_text(aes(label = name,
                     hjust = ifelse(position == "upper", 0, 1)),
                 size = 6, angle = 90, vjust = 0.5, colour = "black") +
  scale_colour_manual(values = c("darkorange3", "seagreen")) +
  scale_shape_manual(values = c(19, 19)) +
  scale_size_continuous(range = c(5, 15)) +
  scale_edge_width(range = c(0.5, 4.5)) +
  theme(
    panel.grid = element_blank(),
    panel.background = element_blank(),
    panel.border = element_blank(),
    plot.background = element_blank(),
    legend.position = "none",
    plot.margin = margin(t = 200, r = 10, b = 200, l = 10),
    plot.title = element_text(vjust=45, face="bold", size = 22)
  ) +
  coord_cartesian(expand = FALSE, clip = "off") +
  ggtitle("Ejea 2024") 

library(patchwork)

p1 / p2




```



```{r echo=F, fig.align='center', message=FALSE, warning=FALSE, out.width="85%", fig.width=10,fig.height=8, fig.cap="\\textbf{Figure 8.} Comparison of network specialization (a), connectance (b), robustness to plant loss (c), robustness to pollinator loss (d), robustness at network level (e), and normalized nestedness (f) for Cantavieja and Ejea de los Caballeros across sampling years."}

library(bipartite)
library(purrr)
library(tidyr)

matrices_list = readRDS("../Data/matrices_list.rds")
#Compute specialization
H2_results = map(matrices_list, H2fun, H2_integer=TRUE)
network_h2 = bind_rows(H2_results, .id = "Site_id")
network_h2 = network_h2 %>%
select(Site_id, H2)
#Compute connectance
connectance_results = map(matrices_list, networklevel, index="connectance")
network_connectance = bind_rows(connectance_results, .id = "Site_id")
#Bind metric data
metrics = left_join(network_h2,network_connectance)
#Separate Site_id again for plotting
for_plotting = metrics %>%
separate(Site_id, c("site", "Year"), "_") %>%
mutate(site = str_to_title(site)) %>%
rename(Connectance = connectance)
#Plot data
p1 = for_plotting %>%
ggplot(aes(site, H2, fill = Year), group = Year) +
geom_col(position = "dodge", alpha=0.9) +
scale_fill_manual(values = c("black", "tomato4")) +
theme_bw() +
coord_cartesian(expand = FALSE) +
xlab(NULL) +
ylab("Species") +
ggtitle("a) Network specialization (H2')")+ theme(plot.title = element_text(size=18, face= "bold"), panel.border = element_rect(size=1.3),
                axis.title = element_text(size=14),
                axis.text = element_text(size=12))


p2 = for_plotting %>%
ggplot(aes(site, Connectance, fill = Year), group = Year) +
geom_col(position = "dodge", alpha=0.9) +
scale_fill_manual(values = c("black", "tomato4")) +
theme_bw() +
coord_cartesian(expand = FALSE) +
xlab(NULL) +
ylab("Species") +
ggtitle("b) Connectance")+ theme(plot.title = element_text(size=18, face= "bold"), panel.border = element_rect(size=1.3),
                axis.title = element_text(size=14),
                axis.text = element_text(size=12))


#p1 + p2
#Load robustness
#Save data to avoid running it on report
long_plants = readRDS("../Data/robustness_plants.rds")
long_pollinators = readRDS("../Data/robustness_pollinators.rds")
long_network = readRDS("../Data/robustness_network.rds")


p3 = long_plants %>%
ggplot(aes(site, Robustness, fill = Year), group = Year) +
geom_col(position = "dodge", alpha=0.9) +
scale_fill_manual(values = c("black", "tomato4")) +
theme_bw() +
coord_cartesian(expand = FALSE) +
xlab(NULL) +
ylab("Robustness") +
ggtitle("c) Robustness to plant loss")+ theme(plot.title = element_text(size=18, face= "bold"), panel.border = element_rect(size=1.3),
                axis.title = element_text(size=14),
                axis.text = element_text(size=12))

p4 = long_pollinators %>%
ggplot(aes(site, Robustness, fill = Year), group = Year) +
geom_col(position = "dodge", alpha=0.9) +
scale_fill_manual(values = c("black", "tomato4")) +
theme_bw() +
coord_cartesian(expand = FALSE) +
xlab(NULL) +
ylab("Robustness") +
ggtitle("d) Robustness to pollinator loss")+ theme(plot.title = element_text(size=18, face= "bold"), panel.border = element_rect(size=1.3),
                axis.title = element_text(size=14),
                axis.text = element_text(size=12))

p5 = long_network %>%
ggplot(aes(site, Robustness, fill = Year), group = Year) +
geom_col(position = "dodge", alpha=0.9) +
scale_fill_manual(values = c("black", "tomato4")) +
theme_bw() +
coord_cartesian(expand = FALSE) +
xlab(NULL) +
ylab("Robustness") +
ggtitle("e) Robustness at network-level")+ theme(plot.title = element_text(size=18, face= "bold"), panel.border = element_rect(size=1.3),
                axis.title = element_text(size=14),
                axis.text = element_text(size=12))

#Load nestedness graph
nestedness_tibble = readRDS("../Data/nestedness.rds")

p6 = nestedness_tibble %>%
ggplot(aes(site, temperature, fill = Year), group = Year) +
geom_col(position = "dodge", alpha=0.9) +
scale_fill_manual(values = c("black", "tomato4")) +
theme_bw() +
coord_cartesian(expand = FALSE) +
xlab(NULL) +
ylab("NODFc") +
ggtitle("f) Normalized nestedness")+ theme(plot.title = element_text(size=18, face= "bold"), panel.border = element_rect(size=1.3),
                axis.title = element_text(size=14),
                axis.text = element_text(size=12))



(p1 + p2) / (p3 + p4) / (p5 + p6)

```


Our results show that plant-pollinator networks increased in connectance and degree of nestedness. These two properties are important because they are associated with the stability of the communities. In contrast, the networks did not change their degree of specialization, and the robustness to in silico extinctions showed mixed results, depending on which species went extinct, but with small effects in general.

```{r echo=F, fig.align='center', message=FALSE, warning=FALSE, out.width="60%"}
library(kableExtra) #to plot the tables

data_2021 = read.csv("../Data/life_polinizadores_2021.csv")
#Create table with spp
pollinators_2021 = data_2021 %>%
group_by(site_id, year) %>%
summarise(Pollinators = n_distinct(pollinators))

plants_2021 = data_2021 %>%
group_by(site_id, year) %>%
summarise(Plants = n_distinct(plants))

spp_2021 = left_join(pollinators_2021, plants_2021)

data_2024 = read.csv("../Data/life_polinizadores_2024.csv")
#Create table with spp
pollinators_2024 = data_2024 %>%
group_by(site_id, year) %>%
summarise(Pollinators = n_distinct(pollinators))

plants_2024 = data_2024 %>%
group_by(site_id, year) %>%
summarise(Plants = n_distinct(plants))

spp_2024 = left_join(pollinators_2024, plants_2024)

#Now bind both years
spp_year = bind_rows(spp_2021,spp_2024)

table_1 = spp_year %>%
  rename(Location = site_id) %>%
  rename(Year = year) %>%
  arrange(Location) %>%
  mutate(Location = recode_factor(Location, "cantavieja" = "Cantavieja")) %>%
  mutate(Location = recode_factor(Location, "ejea caballeros" = "Ejea"))

#Add metrics
matrices_list = readRDS("../Data/matrices_list.rds")

#Calculate network descriptors
library(bipartite)
library(purrr)
library(tidyr)
#Compute specialization
H2_results = map(matrices_list, H2fun, H2_integer=TRUE)
network_h2 = bind_rows(H2_results, .id = "Site_id")
network_h2 = network_h2 %>%
select(Site_id, H2)
#Compute connectance
connectance_results = map(matrices_list, networklevel, index="connectance")
network_connectance = bind_rows(connectance_results, .id = "Site_id")
#Bind metric data
metrics = left_join(network_h2,network_connectance)
#Separate Site_id again for plotting
connectance_nestedness = metrics %>%
separate(Site_id, c("site", "Year"), "_") %>%
mutate(site = str_to_title(site)) %>%
rename(Connectance = connectance) %>%
rename(Location =site) %>%
mutate(Year =as.integer(Year))

table_1 = left_join(table_1, connectance_nestedness)

table_1 = table_1 %>% 
rename(C = Connectance)

#Prepare robustness data to load on markdown
long_plants = readRDS("../Data/robustness_plants.rds")
long_pollinators = readRDS("../Data/robustness_pollinators.rds")
long_network = readRDS("../Data/robustness_network.rds")

table_1$`Plant extinctions` = long_plants$Robustness
table_1$`Poll. extinctions` = long_pollinators$Robustness
table_1$`Robustness` = long_network$Robustness

#Prepare nestedness to load data on markdown
nestedness_tibble = readRDS("../Data/nestedness.rds")

table_1$Nestedness = nestedness_tibble$temperature

table_1 = table_1 %>% 
rename("Polls." = "Pollinators")

table_1 %>%
  kbl("latex",longtable = T,digits = 3,align = "c", escape=FALSE,caption = "\\textbf{Table 1.} Summary of network descriptors for Cantavieja and Ejea de los Caballeros: Pollinator and plant richness, network specialization (H2'), connectance (C), robustness to plant extinctions, robustness to pollinator extinctions, network robustness, and normalized nestedness.") %>%
  kable_styling(font_size = 9,latex_options = c("striped","repeat_header"), full_width = F, position = "left") %>% 
row_spec(0, bold=T)


```


## Concluding remarks

Overall, the total number of pollinators was higher after restoration practices along with key network descriptors such as connectance or normalized nestedness for both locations. However, it is worth noting that the accumulation curves of species richness and interactions does not saturate, likely indicating that further sampling effort to characterize the full plant-pollinator communities may be needed. The fact that sampling dates differed across years may affect the observed differences in plant and pollinator composition and interactions, as phenology is a key driver of plant-pollinator networks [@forrest2015; @peralta2020]. While robustness to pollinator loss was higher in 2024, the networks showed lower number of floral resources, which have important implications for the robustness of the overall networks, as the loss of few species can lead more rapidly to the loss of pollinators. The fact that networks are more connected and slightly less specialized in 2024 could be due to a lower plant:pollinator ratio, resulting in a higher number of partners per plant species, more connected networks and lower chances of being selective for pollinators. Thus, while restoration practices may have helped pollinator diversity, the level of sampling coverage and species phenology are key factors shaping these differences, and finer-scale data may be needed to uncover restoration effects.

## References


